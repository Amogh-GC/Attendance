<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>College Attendance Dashboard</title>
<link rel="stylesheet" href="public/css/styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<header>
  <div class="logo">
    <img src="https://i.postimg.cc/0yBYV4MJ/unnamed-removebg-preview.jpg" alt="Logo">
  </div>
  <div class="header-content">
    <h1>College Attendance Dashboard</h1>
    <p>Indian Institute of Information Technology</p>
  </div>
  <div class="user-menu">
    <div class="user-info">
      <span class="user-name" id="userName">User</span>
      <span class="user-role" id="userRole">Student</span>
    </div>
    <a href="/login" class="logout-btn">
      <i class="fas fa-sign-out-alt"></i>
      Logout
    </a>
  </div>
</header>

<script>
// Immediately set user name from localStorage before page fully loads
(function() {
  const storedName = localStorage.getItem('userName');
  const storedRole = localStorage.getItem('userRole');
  
  // Wait for DOM to be ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      if (storedName) {
        document.getElementById('userName').textContent = storedName;
      }
      if (storedRole) {
        document.getElementById('userRole').textContent = storedRole.charAt(0).toUpperCase() + storedRole.slice(1);
      }
    });
  } else {
    // DOM is already ready
    if (storedName) {
      document.getElementById('userName').textContent = storedName;
    }
    if (storedRole) {
      document.getElementById('userRole').textContent = storedRole.charAt(0).toUpperCase() + storedRole.slice(1);
    }
  }
})();
</script>

<div class="container">
  <div class="class-card" onclick="showAttendance('cs301')">
    <h2>CS301 - Compiler Design</h2>
    <p class="faculty">Faculty: Dr. T. Sugritha</p>
    <div class="progress-container">
      <div class="progress-bar"><div class="progress" id="progress-cs301"></div></div>
      <span class="percentage" id="percent-cs301">0%</span>
    </div>
    <div class="stats-card" id="stats-cs301"></div>
    <div class="attendance-detail" id="cs301"></div>
  </div>

  <div class="class-card" onclick="showAttendance('cs302')">
    <h2>CS302 - Database Management Systems</h2>
    <p class="faculty">Faculty: Dr. M. Ambika</p>
    <div class="progress-container">
      <div class="progress-bar"><div class="progress" id="progress-cs302"></div></div>
      <span class="percentage" id="percent-cs302">0%</span>
    </div>
    <div class="stats-card" id="stats-cs302"></div>
    <div class="attendance-detail" id="cs302"></div>
  </div>
</div>

<script src="/public/js/attendance.js"></script>
</body>
</html>
